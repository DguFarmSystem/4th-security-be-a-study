# [AWS WAF]
💬 저는 팜 시스템 홈페이지를 개발하면서, 급하게 AWS WAF를 적용했었습니다. GA를 보다가 러시아 등등... 아예 상관없는 국가들에서 트래픽이 꽤 있었습니다. 그래서 혹시나 하는 마음에 급하게 해외 접속을 차단했었는데, WAF를 좀 더 이해해보고 싶어서 우아한 기술 블로그를 읽어보았습니다!

https://techblog.woowahan.com/2699/

1) WAF는 웹의 비정상 트래픽을 탐지하고 차단하기 위한 방화벽입니다. 그러면 FW랑은 무슨 차이일까요? FW은 TCP/IP 레벨에 포함된 정보들을 기반으로 차단룰을 설정하지만, WAF는 웹 프로토콜 HTTP 정보를 바탕으로 차단룰을 설정합니다. 

2) WAF가 웹 개발자가 해야하는 일을 많이 줄여주었지만, 논리적 취약점은 탐지하지 못합니다. 예를 들어 주석에 중요한 정보(관리자 계정 정보)가 들어있는 터무니 없는 문제...에서부터 잘못된 권한부여, 불충분한 세션 관리, 서버 정보 노출, 우회를 목적으로 한 파라미터 변조 등이 있습니다!

3) WAF는 서비스 아키텍처를 수립할 때부터 고려해야하며, 중간에 도입하려면 여러 문제들이 생깁니다. AWS WAF는 이러한 문제를 해결해줍니다. 👍🏻

4) AWS WAF는 Cloudfront 와 ALB, API Gateway에 연동하는 선택지가 있습니다. 저는 ALB에 연동했었는데...😭 필자는 Cloudfront에 연동하는 것이 더 유리하다고 봅니다. 그 이유는 DDoS 공격에 의한 대비를 위해 Cloudfront의 Global edge를 통해 DDoS 공격을 먼저 처리하고, VPC내에 트래픽이 유입되는 것이 더 낫기 때문입니다. 또는 Cloudfront + ALB 두 곳에 WAF를 전부 연동해버리는 방법도 있다고 합니다. (이때 Cloudfront -> L7 DoS 및 임계치 조절, IP Blacklist / ALB -> 웹 취약점 공격을 중심으로 설정)

그리고 정말 막기를 잘 했다는 생각이 듭니다... 독일에서 왜 이렇게 접속을 많이 하는지 모르겠네요!
😬 생각 없이 적용했었는데, 잘 생각하고 적용해두면 밤에 편하게 잠들 수 있을 거 같네요.... 

![image](https://github.com/user-attachments/assets/5bea9150-0c21-46a5-9b12-fdfdad9754ed)
